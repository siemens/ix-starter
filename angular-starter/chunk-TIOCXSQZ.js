import{a as g}from"./chunk-35Z3LQ2S.js";import{a as p,b as m,c as u,d as b,e as f,f as v,h as T}from"./chunk-CZHMCKIS.js";import{b as h}from"./chunk-Y5IHOO62.js";import{a as d}from"./chunk-OKWXEGRG.js";import{a as w,d as s,e as y,f as k}from"./chunk-GG4ZXK7F.js";import{f as r}from"./chunk-S5EYVFES.js";var P='.dialog{margin:0;padding:0;border:none;max-width:18.25rem;width:-moz-max-content;width:max-content;background-color:transparent;overflow-wrap:break-word;box-shadow:none;overflow:visible}.tooltip-container{display:block;position:relative;width:auto;height:-moz-fit-content;height:fit-content;background:var(--theme-tootlip--background);color:var(--theme-color-std-text);padding:0.375rem 0.75rem 0.375rem 0.875rem;box-shadow:var(--theme-shadow-4);border-radius:0.25rem}.content-wrapper{overflow:auto}.tooltip-title{display:flex;align-items:center}.tooltip-title ::slotted(ix-icon){margin-right:0.35rem}.arrow,.arrow::before{position:absolute;width:12px;height:12px;background:inherit}.arrow{visibility:hidden}.arrow::before{visibility:visible;content:"";transform:rotate(45deg);background-color:var(--theme-tootlip--background)}',a=c=>c!==null?`${c}px`:"",A=0,C=(()=>{let c=class{constructor(t){w(this,t),this.interactive=!1,this.placement="top",this.showDelay=0,this.hideDelay=50,this.animationFrame=!1,this.visible=!1,this.instance=A++,this.dialogRef=d()}get arrowElement(){return this.hostElement.shadowRoot.querySelector(".arrow")}showTooltip(t){return r(this,null,function*(){if(this.clearTimeouts(),this.showTooltipTimeout||this.visibleFor===t)return;let e=yield this.dialogRef.waitForCurrent();this.showTooltipTimeout=setTimeout(()=>{this.setAnchorElement(t),e.showPopover(),this.applyTooltipPosition(t,e),this.registerTooltipListener(e)},this.showDelay)})}hideTooltip(){return r(this,arguments,function*(t=this.hideDelay){if(this.clearTimeouts(),this.hideTooltipTimeout||!this.visible)return;this.interactive&&t===50&&(t=150);let e=yield this.dialogRef.waitForCurrent();this.hideTooltipTimeout=setTimeout(()=>{var i,o;this.setAnchorElement(),e.hidePopover(),(i=this.disposeAutoUpdate)===null||i===void 0||i.call(this),(o=this.disposeTooltipListener)===null||o===void 0||o.call(this)},t)})}setAnchorElement(t){t?(this.visibleFor=t,this.visible=!0):(this.visibleFor=void 0,this.visible=!1)}computeArrowPosition({placement:t,middlewareData:e}){let{x:i,y:o}=e.arrow,l={top:"unset",right:"unset",bottom:"unset",left:"unset"};if(t.startsWith("top"))return Object.assign(Object.assign({},l),{left:a(i),top:a(o)});if(t.startsWith("right"))return Object.assign(Object.assign({},l),{left:a(-6),top:a(o)});if(t.startsWith("bottom"))return Object.assign(Object.assign({},l),{left:a(i),top:a(-6)});if(t.startsWith("left"))return Object.assign(Object.assign({},l),{right:a(-6),top:a(o)})}computeTooltipPosition(t,e){return r(this,null,function*(){return T(t,e,{strategy:"fixed",placement:this.placement,middleware:[u(),m(12),v({element:this.arrowElement}),b({fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"end",padding:10}),f()]})})}applyTooltipArrowPosition(t){let e=this.computeArrowPosition(t);Object.assign(this.arrowElement.style,e)}applyTooltipPosition(t,e){return r(this,null,function*(){if(t)return new Promise(i=>{var o;(o=this.disposeAutoUpdate)===null||o===void 0||o.call(this),this.disposeAutoUpdate=p(t,e,()=>r(this,null,function*(){var l;let n=yield this.computeTooltipPosition(t,e);((l=n.middlewareData.hide)===null||l===void 0?void 0:l.referenceHidden)&&(this.hideTooltip(0),i(n)),n.middlewareData.arrow&&this.applyTooltipArrowPosition(n);let{x:L,y:x}=n;Object.assign(e.style,{left:a(L),top:a(x)}),i(n)}),{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,animationFrame:this.animationFrame})})})}queryAnchorElements(){return r(this,null,function*(){if(this.for)return Array.isArray(this.for)?this.resolveElements(this.for):this.resolveElements([this.for])})}resolveElements(t){return r(this,null,function*(){let e=[];return yield Promise.all(t.map(i=>r(this,null,function*(){if(typeof i=="string"){let o=yield g(i,this.hostElement);o&&e.push(...o)}else i instanceof HTMLElement?e.push(i):i instanceof Promise&&e.push(yield i)}))),e})}registerTriggerListener(){return r(this,null,function*(){var t;(t=this.disposeTriggerListener)===null||t===void 0||t.call(this);let e=yield this.queryAnchorElements();if(!e)return;let i=[];e.forEach(o=>{i.push({element:o,eventType:"mouseenter",callback:()=>{this.showTooltip(o)}},{element:o,eventType:"mouseleave",callback:()=>{this.hideTooltip()}},{element:o,eventType:"focus",callback:()=>{this.showTooltip(o)}},{element:o,eventType:"focusout",callback:()=>{this.hideTooltip()}})}),this.disposeTriggerListener=h(i)})}registerTooltipListener(t){var e;(e=this.disposeTooltipListener)===null||e===void 0||e.call(this),this.disposeTooltipListener=h([{element:t,eventType:"mouseenter",callback:()=>{this.interactive&&this.clearHideTimeout()}},{element:t,eventType:"focus",callback:()=>{this.interactive&&this.clearHideTimeout()}},{element:t,eventType:"mouseleave",callback:()=>{this.hideTooltip()}},{element:t,eventType:"focusout",callback:()=>{this.hideTooltip()}},{element:t,eventType:"click",callback:i=>{i.stopPropagation()}},{element:document,eventType:"keydown",callback:i=>{i.key==="Escape"&&this.hideTooltip()}}])}registerDomChangeListener(){let t=new MutationObserver(()=>{this.registerTriggerListener()});t.observe(document.body,{attributes:!0,attributeFilter:["data-ix-tooltip"],childList:!0,subtree:!0}),this.disposeDomChangeListener=()=>{t.disconnect()}}clearHideTimeout(){clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=void 0}clearShowTimeout(){clearTimeout(this.showTooltipTimeout),this.showTooltipTimeout=void 0}clearTimeouts(){this.clearHideTimeout(),this.clearShowTimeout()}componentWillLoad(){this.registerTriggerListener()}componentDidLoad(){this.registerDomChangeListener()}disconnectedCallback(){var t,e,i,o;this.clearTimeouts(),(t=this.disposeAutoUpdate)===null||t===void 0||t.call(this),(e=this.disposeTriggerListener)===null||e===void 0||e.call(this),(i=this.disposeTooltipListener)===null||i===void 0||i.call(this),(o=this.disposeDomChangeListener)===null||o===void 0||o.call(this)}render(){return s(y,{key:"917322f34b65fc6d5ff8facad86b1ba72990c757",role:"tooltip",class:{visible:this.visible}},s("dialog",{key:"1a24b3ed79fe491b554577aa0c52cd06b728d2fd",ref:this.dialogRef,id:"tooltip-"+this.instance,class:"dialog",popover:"manual",inert:!this.visible},s("div",{key:"a5f76ae5d81b4f71bd58d5a55500ea55df36c28d",class:"tooltip-container"},s("div",{key:"05d504218d1bd58b55848edd447f51ef32118aeb",class:"content-wrapper"},s("div",{key:"804f79dc7e35fe469e36a76465789cc1c926d2a4",class:"tooltip-title"},s("slot",{key:"fbd1ab75b38b15937e3f3c7ee1719aa0bd1e501a",name:"title-icon"}),s("ix-typography",{key:"69524350ad0c2723a8989698b5290dba25e3800b",format:"h5"},this.titleContent,s("slot",{key:"344776805a5c59c910d65ed55cb5f20d470096cb",name:"title-content"}))),s("slot",{key:"091c2d8b0e135adbd59147c86443a7b2e22d5bc8"}),s("div",{key:"261834f164a5211c3f2ef53dc76d54df6e015c06",class:"arrow"})))))}get hostElement(){return k(this)}};return c.style=P,c})();export{C as ix_tooltip};
